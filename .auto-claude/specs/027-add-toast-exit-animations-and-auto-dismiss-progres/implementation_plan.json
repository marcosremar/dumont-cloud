{
  "feature": "Add toast exit animations and auto-dismiss progress indicator",
  "description": "Enhance Toast component with smooth exit animation (slide up + fade out) and a visual progress bar showing time remaining before auto-dismiss.",
  "created_at": "2025-12-31T21:16:41.558Z",
  "updated_at": "2026-01-01T07:00:00.000Z",
  "status": "in_progress",
  "planStatus": "approved",
  "workflow_type": "development",
  "services_involved": [
    "web"
  ],
  "spec_file": "spec.md",
  "phases": [
    {
      "id": "phase-1",
      "name": "Exit Animation Implementation",
      "description": "Add smooth exit animation when toasts are dismissed",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add exit animation state tracking",
          "description": "Modify ToastProvider to track which toasts are in 'exiting' state. When removeToast is called, mark toast as exiting instead of immediately removing, then remove after animation completes.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "Toast state includes 'isExiting' boolean",
            "removeToast triggers exit state instead of immediate removal",
            "Toast is removed from DOM after animation duration (300ms)"
          ],
          "notes": "Implemented exit animation state tracking: Added EXIT_ANIMATION_DURATION constant (300ms), modified removeToast to mark toast as isExiting first then remove after animation duration, ToastItem now accepts isExiting prop. Commit: d39c2e5",
          "updated_at": "2026-01-01T06:03:42.572531+00:00"
        },
        {
          "id": "1.2",
          "title": "Create toast-out CSS animation",
          "description": "Add @keyframes for toast-out animation that slides up and fades out. Create animate-toast-out class.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "toast-out keyframes defined with translateY(-100%) and opacity 0",
            "animate-toast-out class applies the exit animation",
            "Animation duration matches entrance animation (0.3s)"
          ],
          "notes": "Added @keyframes toast-out animation and .animate-toast-out class. Animation slides up and fades out, matching the entrance animation timing (0.3s). Uses ease-in timing and forwards fill-mode to retain final state. Commit: 8424e8a",
          "updated_at": "2026-01-01T06:05:07.520940+00:00"
        },
        {
          "id": "1.3",
          "title": "Apply exit animation conditionally",
          "description": "Update ToastItem to apply animate-toast-out class when isExiting is true.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "ToastItem receives isExiting prop",
            "Exit animation class applied when isExiting is true",
            "Both manual dismiss and auto-dismiss trigger exit animation"
          ],
          "notes": "Applied conditional animation class to ToastItem: added animationClass computed property that returns 'animate-toast-out' when isExiting is true, otherwise 'animate-toast-in'. Exit animation now triggers correctly for both manual dismiss (close button) and auto-dismiss (timeout). Commit: f4295e1",
          "updated_at": "2026-01-01T06:06:36.556649+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Progress Indicator Implementation",
      "description": "Add visual progress bar showing time remaining before auto-dismiss",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Create ProgressBar component",
          "description": "Build a thin progress bar that shrinks from 100% to 0% over the toast duration. Use CSS animation for smooth performance.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "ProgressBar component renders at bottom of toast",
            "Bar starts at 100% width and shrinks to 0%",
            "Animation uses CSS linear timing over toast duration",
            "Bar color matches toast variant accent color"
          ],
          "notes": "Created ProgressBar component with CSS animation that shrinks from 100% to 0% width. Uses linear timing, configurable duration via props, and matches toast variant accent color. Component renders at bottom of toast and handles persistent toasts (duration=0) by returning null. Commit: 385768e",
          "updated_at": "2026-01-01T06:08:42.094476+00:00"
        },
        {
          "id": "2.2",
          "title": "Integrate progress bar into ToastItem",
          "description": "Add ProgressBar to ToastItem, passing duration and variant props. Position at bottom of toast.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "Progress bar visible at bottom of toast",
            "Progress bar uses variant-specific color",
            "Duration prop flows from addToast through to ProgressBar"
          ],
          "notes": "ProgressBar component is already integrated into ToastItem (done as part of 2.1 implementation). ProgressBar receives duration prop from ToastItem and accentColor from variant.accent. Positioned at bottom of toast using flex-col layout. Currently uses ToastItem's default duration (4000ms) - subtask 2.3 will connect the full duration flow from addToast.",
          "updated_at": "2026-01-01T06:12:23.269658+00:00"
        },
        {
          "id": "2.3",
          "title": "Pass duration to ToastItem",
          "description": "Update toast state to include duration, pass to ToastItem for progress bar timing.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "Toast object includes duration property",
            "ToastItem receives and uses duration prop",
            "Toasts with duration=0 (persistent) show no progress bar"
          ],
          "notes": "Updated toast state to include duration property in addToast function. Added duration prop to ToastItem rendering in ToastProvider. Progress bar now correctly uses the actual toast duration instead of defaulting to 4000ms. Persistent toasts (duration=0) continue to show no progress bar as the ProgressBar component already handles this case. Commit: ac8b852",
          "updated_at": "2026-01-01T06:15:56.225711+00:00"
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Polish and Edge Cases",
      "description": "Handle edge cases and add UX improvements",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Pause progress on hover",
          "description": "When user hovers over a toast, pause the auto-dismiss timer and progress bar animation. Resume on mouse leave.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "Hovering pauses the auto-dismiss countdown",
            "Progress bar animation pauses on hover",
            "Timer resumes from same position on mouse leave",
            "Manual close button still works during hover"
          ],
          "notes": "Implemented hover pause functionality: Added isPaused prop to ProgressBar with animation-play-state CSS property. Moved auto-dismiss timer from ToastProvider to ToastItem to support pause/resume. Timer tracks remaining time on pause using refs, resumes from same position on mouse leave. Manual close button works during hover. Persistent toasts unaffected. Commit: e68fbb8",
          "updated_at": "2026-01-01T06:18:23.266956+00:00"
        },
        {
          "id": "3.2",
          "title": "Handle persistent toasts",
          "description": "Ensure toasts with duration=0 don't show progress bar and handle exit animation correctly.",
          "status": "completed",
          "file_paths": [
            "web/src/components/Toast.jsx"
          ],
          "acceptance_criteria": [
            "Persistent toasts (duration=0) show no progress bar",
            "Exit animation still works for persistent toasts",
            "Manual dismiss is the only way to close persistent toasts"
          ],
          "notes": "Verified persistent toast handling - all acceptance criteria already met: (1) ProgressBar returns null for duration <= 0, (2) Exit animation controlled by isExiting prop regardless of duration, (3) Auto-dismiss timer skipped for duration <= 0. No code changes needed.",
          "updated_at": "2026-01-01T06:20:43.723830+00:00"
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Testing and Verification",
      "description": "Test all functionality and verify acceptance criteria",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Manual testing of all toast variants",
          "description": "Test success, error, warning, and info toasts with exit animation and progress bar.",
          "status": "pending",
          "file_paths": [],
          "acceptance_criteria": [
            "All variants display correct progress bar color",
            "Exit animation works for all variants",
            "No visual glitches or layout issues"
          ]
        },
        {
          "id": "4.2",
          "title": "Test hover pause functionality",
          "description": "Verify hover pause works correctly for progress bar and auto-dismiss timer.",
          "status": "pending",
          "file_paths": [],
          "acceptance_criteria": [
            "Progress bar pauses visually on hover",
            "Toast does not auto-dismiss while hovered",
            "Countdown resumes correctly after hover ends"
          ]
        }
      ]
    }
  ],
  "final_acceptance": [
    "Toast exit animation is smooth (slide up + fade out)",
    "Progress bar shows time remaining with variant-matched color",
    "Hover pauses auto-dismiss timer and progress bar",
    "Persistent toasts work correctly without progress bar",
    "All four toast variants (success, error, warning, info) work correctly"
  ],
  "qa_signoff": {
    "status": "pending",
    "issues": "",
    "tests_passed": ""
  },
  "last_updated": "2026-01-01T06:20:43.723845+00:00"
}