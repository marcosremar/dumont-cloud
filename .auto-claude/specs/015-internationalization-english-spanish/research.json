{
  "integrations_researched": [
    {
      "name": "react-i18next",
      "type": "library",
      "purpose": "React integration for i18next - handles UI internationalization in the web frontend",
      "verified_package": {
        "name": "react-i18next",
        "install_command": "npm install react-i18next i18next",
        "version": ">=13.0.0",
        "peer_dependencies": ["react >=16.8.0", "i18next >=23.0.0"],
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "import { useTranslation } from 'react-i18next';",
          "import i18n from './i18n';",
          "import { I18nextProvider } from 'react-i18next';"
        ],
        "initialization": "i18n.use(initReactI18next).init({ resources, lng: 'en', fallbackLng: 'en', interpolation: { escapeValue: false } });",
        "key_functions": [
          "useTranslation() - React hook for translations",
          "t(key) - Translation function",
          "i18n.changeLanguage(lng) - Switch language dynamically",
          "Trans component - For JSX interpolation"
        ],
        "verified_against": "Standard npm package - react-i18next is the official React integration for i18next"
      },
      "configuration": {
        "env_vars": [],
        "config_files": ["i18n.js or i18n.ts for configuration"],
        "translation_files": ["public/locales/{lng}/translation.json"],
        "dependencies": ["i18next", "react-i18next"]
      },
      "infrastructure": {
        "requires_docker": false,
        "build_integration": "Works with Vite out of the box"
      },
      "gotchas": [
        "Must wrap app in I18nextProvider or initialize i18n before React renders",
        "Translation files need to be in public folder or loaded via backend",
        "escapeValue: false is needed for React (XSS protection handled by React)",
        "Suspense mode available but needs proper loading states"
      ],
      "research_sources": [
        "npm package: react-i18next",
        "Official documentation: react.i18next.com",
        "GitHub: i18next/react-i18next"
      ]
    },
    {
      "name": "i18next",
      "type": "library",
      "purpose": "Core internationalization framework - provides translation functionality",
      "verified_package": {
        "name": "i18next",
        "install_command": "npm install i18next",
        "version": ">=23.0.0",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "import i18n from 'i18next';"
        ],
        "initialization": "i18n.init({ resources, lng, fallbackLng, interpolation });",
        "key_functions": [
          "i18n.t(key, options) - Main translation function",
          "i18n.changeLanguage(lng) - Change language",
          "i18n.language - Current language",
          "i18n.addResourceBundle(lng, ns, resources) - Add translations dynamically"
        ],
        "verified_against": "npm package - i18next core library"
      },
      "configuration": {
        "env_vars": [],
        "namespaces": ["translation (default)", "common", "specific feature namespaces"],
        "format": "JSON files with nested key-value pairs"
      },
      "infrastructure": {
        "requires_docker": false
      },
      "gotchas": [
        "Async initialization - ensure i18n is ready before rendering",
        "Namespace loading can be lazy or eager",
        "Interpolation syntax: {{variable}}",
        "Pluralization handled via _plural suffix or count parameter"
      ],
      "research_sources": [
        "npm package: i18next",
        "Official documentation: i18next.com"
      ]
    },
    {
      "name": "i18next-http-backend",
      "type": "library",
      "purpose": "Backend plugin for i18next - loads translation files from server",
      "verified_package": {
        "name": "i18next-http-backend",
        "install_command": "npm install i18next-http-backend",
        "version": ">=2.0.0",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "import HttpBackend from 'i18next-http-backend';"
        ],
        "initialization": "i18n.use(HttpBackend).init({ backend: { loadPath: '/locales/{{lng}}/{{ns}}.json' } });",
        "key_functions": [
          "Automatic loading of translation files from specified path"
        ],
        "verified_against": "npm package - i18next-http-backend"
      },
      "configuration": {
        "backend_options": {
          "loadPath": "/locales/{{lng}}/{{ns}}.json",
          "addPath": "/locales/add/{{lng}}/{{ns}}",
          "crossDomain": false
        }
      },
      "infrastructure": {
        "requires_docker": false
      },
      "gotchas": [
        "Translation files must be served statically or via API",
        "CORS issues if loading from different domain",
        "Vite requires translations in public/ folder"
      ],
      "research_sources": [
        "npm package: i18next-http-backend"
      ]
    },
    {
      "name": "Flask-Babel",
      "type": "library",
      "purpose": "Flask extension for internationalization - handles backend and template i18n",
      "verified_package": {
        "name": "Flask-Babel",
        "install_command": "pip install Flask-Babel",
        "version": ">=4.0.0",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "from flask_babel import Babel, gettext, lazy_gettext",
          "from flask_babel import _"
        ],
        "initialization": "babel = Babel(app); @babel.localeselector\\ndef get_locale(): return request.accept_languages.best_match(['en', 'es'])",
        "key_functions": [
          "gettext('string') or _('string') - Translate string",
          "lazy_gettext('string') - Lazy translation for module-level strings",
          "format_datetime(datetime, format) - Localized datetime formatting",
          "format_number(number) - Localized number formatting"
        ],
        "verified_against": "PyPI package - Flask-Babel"
      },
      "configuration": {
        "env_vars": [],
        "config_options": {
          "BABEL_DEFAULT_LOCALE": "en",
          "BABEL_DEFAULT_TIMEZONE": "UTC",
          "BABEL_TRANSLATION_DIRECTORIES": "translations"
        },
        "translation_files": ["translations/{locale}/LC_MESSAGES/messages.po"],
        "dependencies": ["Babel", "pytz"]
      },
      "infrastructure": {
        "requires_docker": false
      },
      "workflow": {
        "extract": "pybabel extract -F babel.cfg -o messages.pot .",
        "init": "pybabel init -i messages.pot -d translations -l es",
        "compile": "pybabel compile -d translations",
        "update": "pybabel update -i messages.pot -d translations"
      },
      "gotchas": [
        "Requires babel.cfg configuration file",
        "Must compile .po files to .mo files before use",
        "lazy_gettext needed for strings defined at module level",
        "Jinja2 templates need {% trans %} blocks or _() function",
        "locale selector function determines user's language"
      ],
      "research_sources": [
        "PyPI package: Flask-Babel",
        "Official documentation: python-babel.github.io/flask-babel/"
      ]
    },
    {
      "name": "Babel",
      "type": "library",
      "purpose": "Python internationalization library - provides core i18n utilities",
      "verified_package": {
        "name": "Babel",
        "install_command": "pip install Babel",
        "version": ">=2.14.0",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "from babel import Locale",
          "from babel.dates import format_datetime",
          "from babel.numbers import format_number"
        ],
        "cli_commands": [
          "pybabel extract - Extract translatable strings",
          "pybabel init - Initialize new locale",
          "pybabel update - Update existing translations",
          "pybabel compile - Compile .po to .mo files"
        ],
        "verified_against": "PyPI package - Babel"
      },
      "configuration": {
        "config_files": ["babel.cfg - Extraction configuration"],
        "format": "GNU gettext .po/.mo files"
      },
      "infrastructure": {
        "requires_docker": false
      },
      "gotchas": [
        "Must be run in correct directory structure",
        "Extraction mappings must match file patterns correctly",
        "Python files need encoding declaration for non-ASCII strings"
      ],
      "research_sources": [
        "PyPI package: Babel",
        "Official documentation: babel.pocoo.org"
      ]
    },
    {
      "name": "Python gettext",
      "type": "library",
      "purpose": "Built-in Python i18n module - for CLI internationalization",
      "verified_package": {
        "name": "gettext",
        "install_command": "Built-in to Python - no installation needed",
        "version": "Built-in",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "import gettext",
          "from gettext import gettext as _"
        ],
        "initialization": "t = gettext.translation('messages', localedir='./locales', languages=[lang], fallback=True); _ = t.gettext",
        "key_functions": [
          "gettext(message) - Translate message",
          "ngettext(singular, plural, n) - Plural forms",
          "translation(domain, localedir, languages) - Load translation catalog"
        ],
        "verified_against": "Python standard library"
      },
      "configuration": {
        "env_vars": ["LANG", "LANGUAGE"],
        "translation_files": ["locales/{locale}/LC_MESSAGES/{domain}.mo"],
        "dependencies": []
      },
      "infrastructure": {
        "requires_docker": false
      },
      "gotchas": [
        "Must compile .po to .mo files using msgfmt",
        "Directory structure is strict: locale/LC_MESSAGES/domain.mo",
        "Fallback to original string if translation not found",
        "Can use same .po/.mo files as Flask-Babel"
      ],
      "research_sources": [
        "Python standard library documentation"
      ]
    },
    {
      "name": "Jinja2 i18n Extension",
      "type": "library",
      "purpose": "Jinja2 template internationalization - for email templates",
      "verified_package": {
        "name": "jinja2",
        "install_command": "Already installed (see requirements.txt)",
        "version": ">=3.1.0",
        "verified": true
      },
      "api_patterns": {
        "imports": [
          "from jinja2 import Environment",
          "env.add_extension('jinja2.ext.i18n')"
        ],
        "initialization": "env = Environment(); env.add_extension('jinja2.ext.i18n'); env.install_gettext_translations(translations)",
        "template_syntax": [
          "{% trans %}Text to translate{% endtrans %}",
          "{{ _('Text to translate') }}",
          "{% trans name='John' %}Hello {{ name }}{% endtrans %}"
        ],
        "verified_against": "Jinja2 official documentation"
      },
      "configuration": {
        "env_vars": [],
        "dependencies": ["Babel or gettext for translation catalogs"]
      },
      "infrastructure": {
        "requires_docker": false
      },
      "gotchas": [
        "Must enable i18n extension explicitly",
        "Must install translation function via install_gettext_translations()",
        "Works with same .po/.mo files as Flask-Babel",
        "Whitespace handling in trans blocks can be tricky"
      ],
      "research_sources": [
        "Jinja2 documentation - i18n extension"
      ]
    }
  ],
  "unverified_claims": [],
  "recommendations": [
    "Use react-i18next for frontend UI - it's the industry standard and works well with React 18",
    "Use Flask-Babel for backend API responses and Jinja2 email templates - integrates seamlessly with Flask",
    "Use Python gettext for CLI - lightweight and built-in, can share translation files with Flask-Babel",
    "Store translations in standard format: frontend uses JSON, backend/CLI use .po/.mo files",
    "Implement language detection: browser Accept-Language header for web, --language flag for CLI, user preferences in database",
    "Set up translation workflow: extract -> init -> translate -> compile",
    "Consider using professional translation service for Spanish translations to ensure quality",
    "Implement RTL-ready architecture even though Spanish doesn't need it (future-proofing for Arabic, Hebrew, etc.)",
    "Add language selector component in user preferences using existing React components (Radix UI Select)",
    "Ensure all new code uses translation functions from the start (no hardcoded strings)"
  ],
  "architecture_notes": {
    "frontend": {
      "library": "react-i18next + i18next",
      "storage": "public/locales/{lng}/translation.json",
      "language_detection": "User preference from database, fallback to browser language",
      "switching": "Runtime via i18n.changeLanguage()"
    },
    "backend": {
      "library": "Flask-Babel",
      "storage": "translations/{locale}/LC_MESSAGES/messages.po/.mo",
      "language_detection": "User preference from database, fallback to Accept-Language header",
      "email_templates": "Jinja2 i18n extension (same translations as Flask-Babel)"
    },
    "cli": {
      "library": "Python gettext",
      "storage": "locales/{locale}/LC_MESSAGES/dumont.mo (can share with backend)",
      "language_detection": "--language flag, LANG env var, config file",
      "help_text": "All argparse help strings wrapped in _()"
    },
    "documentation": {
      "approach": "Separate markdown files per language",
      "structure": "docs/en/ and docs/es/ directories",
      "tooling": "Manual translation (could use MkDocs i18n plugin in future)"
    }
  },
  "translation_workflow": {
    "steps": [
      "1. Extract strings: pybabel extract (backend) + manual for frontend JSON",
      "2. Initialize Spanish locale: pybabel init -l es",
      "3. Translate .po files (backend) and .json files (frontend)",
      "4. Compile .po to .mo: pybabel compile",
      "5. Test both languages thoroughly",
      "6. Update workflow: extract -> update -> translate -> compile"
    ],
    "tools_needed": [
      "pybabel CLI (from Babel package)",
      "Text editor or translation tool for .po files (Poedit, Lokalize, or manual)",
      "JSON editor for frontend translations"
    ]
  },
  "testing_considerations": [
    "Test language switching in UI",
    "Test CLI with --language es flag",
    "Test email templates in both languages",
    "Test fallback behavior when translation missing",
    "Test interpolation/variable substitution in both languages",
    "Test pluralization rules (Spanish plural rules differ from English)",
    "Test RTL layout (for future languages)",
    "Verify all strings externalized (no hardcoded text)"
  ],
  "known_gaps": [
    {
      "gap": "No existing i18n infrastructure",
      "impact": "Need to implement from scratch",
      "effort": "Medium - well-established libraries available"
    },
    {
      "gap": "Translation quality",
      "impact": "User experience for Spanish speakers",
      "recommendation": "Consider professional translation service or native Spanish speaker review"
    },
    {
      "gap": "Documentation translation",
      "impact": "Large volume of text to translate",
      "recommendation": "Prioritize critical docs first, then expand"
    }
  ],
  "estimated_string_count": {
    "frontend_ui": "~200-400 strings (estimated based on typical dashboard)",
    "cli_help": "~50-100 strings (command help, descriptions, errors)",
    "email_templates": "~20-50 strings (depends on template count)",
    "documentation": "Large - several thousand words across multiple docs",
    "total_effort": "Medium-High due to documentation volume"
  },
  "created_at": "2024-12-31T22:30:00Z"
}
