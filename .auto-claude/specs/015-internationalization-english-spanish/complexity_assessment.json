{
  "complexity": "complex",
  "workflow_type": "feature",
  "confidence": 0.90,
  "reasoning": "Full internationalization is a cross-cutting architectural change affecting all UI layers (dashboard, CLI, docs, emails). Requires i18n framework research, database schema changes for user preferences, and careful string externalization across 15+ files. No existing patterns in codebase.",

  "analysis": {
    "scope": {
      "estimated_files": 18,
      "estimated_services": 3,
      "is_cross_cutting": true,
      "notes": "Affects frontend (dashboard UI), backend (user preferences, email templates), CLI (help text), and documentation. Every user-facing string needs externalization."
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": ["i18n-framework"],
      "research_needed": true,
      "notes": "Need to research and select appropriate i18n library (e.g., i18next, react-intl, gettext) and understand translation file formats (JSON, YAML, PO files)."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": true,
      "notes": "Database schema change to add language preference field to user table. Environment config for default locale and supported languages."
    },
    "knowledge": {
      "patterns_exist": false,
      "research_required": true,
      "unfamiliar_tech": ["i18n-framework", "translation-management"],
      "notes": "Task description mentions this is a 'known gap', indicating no existing i18n infrastructure. Need to establish patterns for string externalization, translation file organization, and language switching."
    },
    "risk": {
      "level": "high",
      "concerns": [
        "Breaking existing UI during string extraction",
        "Missing translations causing fallback to English unexpectedly",
        "Incorrect translation context leading to poor UX",
        "Email template changes breaking email delivery",
        "Performance overhead from i18n library",
        "Ongoing translation maintenance burden"
      ],
      "notes": "Cross-cutting changes to all user-facing text carry significant risk of introducing bugs. Need comprehensive testing to ensure no strings are missed and all translations render correctly in context."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "research",
    "context",
    "spec_writing",
    "self_critique",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": true,
    "needs_self_critique": true,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "high",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["unit", "integration", "e2e"],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "Cross-cutting UI/UX change affecting all user-facing text requires comprehensive testing. E2E tests needed to verify language switching works correctly in UI, CLI outputs correct language, and email templates render properly. Not security-critical but high UX risk."
  },

  "created_at": "2025-12-31T00:00:00Z"
}
