{
  "task_description": "Verificar e corrigir migração GPU→CPU na criação de máquinas usando testes Playwright",
  "scoped_services": ["tests", "web"],
  "files_to_modify": [
    "tests/e2e-journeys/cpu-standby-failover.spec.js",
    "tests/e2e-journeys/failover-complete-journeys.spec.js",
    "tests/auth.setup.js"
  ],
  "files_to_reference": [
    "tests/e2e-journeys/machine-details-actions.spec.js",
    "tests/playwright.config.js",
    "src/domain/services/migration_service.py",
    "web/src/pages/Machines.jsx",
    "web/src/components/MigrationModal.jsx",
    "web/src/components/FailoverMigrationModal.jsx"
  ],
  "patterns": {
    "playwright_test_pattern": "Use @playwright/test with .first() and .catch(() => false) for resilient selectors",
    "auth_pattern": "Auth setup saves state to .auth/user.json and supports both real and demo mode",
    "migration_service_pattern": "GPU↔CPU migration uses snapshot/restore flow via vast.ai API"
  },
  "existing_implementations": {
    "description": "Playwright tests for failover already exist in tests/e2e-journeys/. Migration service in src/domain/services/migration_service.py handles GPU↔CPU migrations.",
    "relevant_files": [
      "tests/e2e-journeys/cpu-standby-failover.spec.js",
      "tests/e2e-journeys/failover-complete-journeys.spec.js",
      "tests/e2e-journeys/failover-strategy-selection.spec.js"
    ]
  },
  "key_commands": {
    "run_cpu_standby_tests": "cd tests && USE_DEMO_MODE=true npx playwright test e2e-journeys/cpu-standby-failover.spec.js",
    "run_failover_tests": "cd tests && USE_DEMO_MODE=true npx playwright test e2e-journeys/failover-complete-journeys.spec.js",
    "show_test_report": "cd tests && npx playwright show-report",
    "start_frontend": "cd web && npm run dev"
  },
  "environment": {
    "frontend_url": "http://localhost:5173",
    "app_url": "http://localhost:5173/app",
    "demo_mode_env": "USE_DEMO_MODE=true",
    "test_user_email": "marcosremar@gmail.com"
  },
  "created_at": "2025-12-31T21:55:03.281851",
  "updated_at": "2025-12-31T22:00:00.000000"
}
