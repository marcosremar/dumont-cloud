{
  "task_description": "Verify and test all components in the Settings interface, improve layout, and create comprehensive Playwright E2E test coverage across 6 tabs (APIs, Storage, Cloud Storage Failover, Agent Sync, Notifications, CPU Failover)",
  "files_to_modify": {
    "web": [
      "web/src/pages/Settings.jsx",
      "web/src/components/StandbyConfig.jsx",
      "web/src/components/FailoverReport.jsx"
    ]
  },
  "files_to_create": {
    "tests": [
      "tests/e2e-journeys/settings.spec.js"
    ]
  },
  "files_to_reference": [
    "tests/e2e-journeys/REAL-user-actions.spec.js",
    "tests/playwright.config.js",
    "web/src/components/tailadmin-ui/index.jsx",
    "web/src/components/Toast.jsx"
  ],
  "patterns": {
    "test_structure": "Uses test.describe() for grouping, beforeEach() for navigation, getByRole/getByText for AI-friendly selectors",
    "selector_priority": "1. getByRole(), 2. getByText(), 3. data-testid, 4. Avoid CSS selectors",
    "component_pattern": "Components use tailadmin-ui components (Card, Alert, Button) for consistency",
    "validation_pattern": "Validators return {valid: boolean, message: string} or null for empty values",
    "settings_tabs": "6 tabs: apis, storage, cloudstorage, agent, notifications, failover"
  },
  "existing_implementations": {
    "description": "Settings.jsx is a 1363-line file with 6 tabs. Has internal SecretInput and ValidatedInput components. Uses Card, Alert, Button from tailadmin-ui. Has validators for 6 fields. StandbyConfig (530 lines) and FailoverReport (787 lines) are sub-components used in the failover tab.",
    "relevant_files": [
      "web/src/pages/Settings.jsx",
      "web/src/components/StandbyConfig.jsx",
      "web/src/components/FailoverReport.jsx",
      "web/src/components/tailadmin-ui/index.jsx"
    ],
    "existing_test_coverage": [
      "tests/e2e-journeys/REAL-user-actions.spec.js - Has one test for Settings navigation but minimal coverage"
    ]
  },
  "settings_components_inventory": {
    "internal_components": [
      {"name": "SecretInput", "purpose": "Password field with show/hide toggle and validation", "priority": "high", "line_range": "49-83"},
      {"name": "ValidatedInput", "purpose": "Input with validation feedback (Alert component)", "priority": "high", "line_range": "86-107"},
      {"name": "Toast", "purpose": "In-app notification for low balance alerts", "priority": "medium", "line_range": "117-230"}
    ],
    "external_components": [
      {"name": "Alert", "source": "tailadmin-ui", "purpose": "Validation feedback"},
      {"name": "Card", "source": "tailadmin-ui", "purpose": "Section containers"},
      {"name": "Button", "source": "tailadmin-ui", "purpose": "Action buttons"},
      {"name": "StandbyConfig", "source": "components/", "purpose": "CPU Standby settings"},
      {"name": "FailoverReport", "source": "components/", "purpose": "Failover metrics and history"}
    ],
    "tabs": [
      {"id": "apis", "label": "APIs & Credenciais", "icon": "Key"},
      {"id": "storage", "label": "Armazenamento", "icon": "Database"},
      {"id": "cloudstorage", "label": "Cloud Storage Failover", "icon": "Cloud"},
      {"id": "agent", "label": "Agent Sync", "icon": "Server"},
      {"id": "notifications", "label": "Notificacoes", "icon": "AlertCircle"},
      {"id": "failover", "label": "CPU Failover", "icon": "Shield"}
    ],
    "validators": [
      "vast_api_key",
      "r2_access_key",
      "r2_secret_key",
      "r2_endpoint",
      "r2_bucket",
      "restic_password"
    ]
  },
  "test_testid_conventions": {
    "tab_buttons": "settings-{tab}-tab",
    "inputs": "{service}-{field}-input",
    "toggles": "{service}-{field}-toggle",
    "cards": "{feature}-config-card",
    "save_buttons": "{tab}-save-btn"
  },
  "created_at": "2025-12-31T21:56:44.373228",
  "updated_at": "2025-12-31T22:00:00.000000"
}
