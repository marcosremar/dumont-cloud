{
  "task_description": "# Cost Prediction Dashboard\n\nPredictive analytics dashboard showing 7-day cost forecasts for GPU spot pricing. Uses ML to forecast costs and suggest optimal timing.\n\n## Rationale\nExtends existing PricePredictionService. Addresses budget planning needs. Differentiates from competitors with cost forecasting. Helps users time spot purchases.\n\n## User Stories\n- As a budget-conscious user, I want to forecast my GPU costs for 7 days so that I can plan my monthly spending\n- As a researcher, I want to know the best time to run my training job so that I minimize costs\n- As a user, I want budget alerts so I can avoid overspending\n\n## Acceptance Criteria\n- [ ] Forecast costs for next 7 days based on usage patterns\n- [ ] Show optimal timing for planned jobs\n- [ ] Budget alerts when forecasted spending exceeds threshold\n- [ ] Historical accuracy tracking for predictions\n- [ ] Integration with calendar for scheduled workloads",
  "scoped_services": ["backend", "web"],
  "files_to_modify": {
    "backend": [
      "src/services/price_prediction_service.py",
      "src/api/v1/endpoints/spot/__init__.py",
      ".env"
    ],
    "web": [
      "web/src/components/spot/index.js"
    ]
  },
  "files_to_create": {
    "backend": [
      "src/api/v1/endpoints/spot/cost_forecast.py",
      "src/services/budget_alert_service.py",
      "src/services/calendar_integration_service.py"
    ],
    "web": [
      "web/src/components/cost-forecast/CostForecastDashboard.jsx",
      "web/src/components/cost-forecast/BudgetAlertSettings.jsx",
      "web/src/components/cost-forecast/OptimalTimingCard.jsx",
      "web/src/components/cost-forecast/AccuracyTracker.jsx"
    ]
  },
  "files_to_reference": [
    "src/services/price_prediction_service.py",
    "src/api/v1/endpoints/spot/prediction.py",
    "web/src/components/spot/SpotPrediction.jsx",
    "web/src/components/savings/SavingsHistoryGraph.jsx"
  ],
  "patterns": {
    "ml_service_pattern": "PricePredictionService uses RandomForestRegressor with StandardScaler, feature engineering includes hour-of-day, day-of-week, cyclical sin/cos encoding, weekend flag. Minimum 50 data points required.",
    "chart_pattern": "Chart.js requires registration of CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler. Custom tooltip callbacks for currency formatting. Dark theme using Tailwind colors.",
    "api_pattern": "FastAPI endpoints in src/api/v1/endpoints/spot/ with router registration. Use SessionLocal for database access. Background tasks for async operations.",
    "state_pattern": "Redux Toolkit for state management. Components consume API via fetch with credentials: 'include' and getAuthHeaders()"
  },
  "existing_implementations": {
    "description": "Found existing 24h price prediction service with RandomForestRegressor ML model. Frontend has Chart.js visualization patterns. Need to extend to 7-day forecasting.",
    "relevant_files": [
      "src/services/price_prediction_service.py",
      "src/api/v1/endpoints/spot/prediction.py",
      "web/src/components/spot/SpotPrediction.jsx",
      "web/src/components/savings/SavingsHistoryGraph.jsx"
    ]
  },
  "tech_stack": {
    "backend": {
      "language": "Python",
      "framework": "FastAPI",
      "ml": "scikit-learn 1.8.0",
      "database": "PostgreSQL via SQLAlchemy",
      "calendar": "google-api-python-client 2.187.0"
    },
    "frontend": {
      "language": "JavaScript",
      "framework": "React 18",
      "charts": "Chart.js 4.5.1 + react-chartjs-2 5.3.1",
      "state": "Redux Toolkit",
      "styling": "Tailwind CSS + Radix UI",
      "ui_components": "@radix-ui/react-slider, @radix-ui/react-switch"
    }
  },
  "created_at": "2025-12-31T23:00:00.000000"
}
