{
  "discovered_files": {
    "src/models/webhook_config.py": {
      "description": "WebhookConfig and WebhookLog SQLAlchemy models for webhook integration. WebhookConfig has user_id, name, url, events (JSON array), secret (optional for HMAC), enabled flag. WebhookLog has webhook_id (FK), event_type, payload (JSON), status_code, response, attempt number, error message. Both have composite indexes for common queries.",
      "category": "database-models",
      "discovered_at": "2025-12-31T21:43:22.702013+00:00"
    },
    "src/core/security/hmac_signature.py": {
      "description": "HMAC-SHA256 signature utilities for webhook security. Contains generate_signature(payload, secret) returning 'sha256={hex}' format, verify_signature(payload, secret, signature) using timing-attack-safe hmac.compare_digest(), and extract_signature_from_header() helper. Payload is JSON-serialized with sorted keys for consistency.",
      "category": "security",
      "discovered_at": "2025-12-31T21:49:24.165253+00:00"
    },
    "src/services/webhook_service.py": {
      "description": "Async webhook delivery service with retry logic. Key exports: WebhookService class, get_webhook_service() singleton, trigger_webhooks(event_type, data, user_id) convenience function. Uses httpx with 10s timeout, 3 retries with exponential backoff (2s, 4s, 8s). Fire-and-forget pattern via asyncio.create_task(). Logs all attempts to WebhookLog table. HMAC signature added via X-Webhook-Signature header when secret configured. Valid events: instance.started, instance.stopped, snapshot.completed, failover.triggered, cost.threshold, test.",
      "category": "services",
      "discovered_at": "2025-12-31T21:54:44.878854+00:00"
    },
    "src/api/v1/endpoints/webhooks.py": {
      "description": "Webhook API endpoints for CRUD + test. Exports router with prefix='/webhooks'. Endpoints: POST / (create), GET / (list), GET /{id}, PUT /{id}, DELETE /{id}, POST /{id}/test (send test payload), GET /{id}/logs (delivery logs), GET /events/types (available events). Uses get_webhook_service() for test delivery. All endpoints require auth via require_auth dependency. Secrets redacted in responses.",
      "category": "api",
      "discovered_at": "2025-12-31T22:00:04.740690+00:00"
    },
    "src/services/gpu/vast.py": {
      "description": "VastService now includes webhook triggers for instance lifecycle events. Methods create_instance, destroy_instance, pause_instance, resume_instance all accept optional user_id parameter and fire webhooks via _fire_webhook_from_sync helper. Events triggered: instance.started (create/resume), instance.stopped (destroy/pause). Fire-and-forget pattern using asyncio.",
      "category": "integration",
      "discovered_at": "2025-12-31T22:17:18.866362+00:00"
    },
    "src/services/gpu/snapshot.py": {
      "description": "GPUSnapshotService.create_snapshot now accepts user_id parameter and fires snapshot.completed webhook after successful snapshot. Webhook data includes snapshot_id, instance_id, size_original, size_compressed, compression_ratio, total_time, workspace_path. Uses _fire_webhook_from_sync helper for async-to-sync webhook delivery.",
      "category": "webhook_integration",
      "discovered_at": "2025-12-31T22:26:40.703070+00:00"
    },
    "src/services/failover_orchestrator.py": {
      "description": "FailoverOrchestrator.execute_failover now accepts user_id parameter and fires failover.triggered webhook on successful failover. Webhook data includes failover_id, machine_id, strategy (warm_pool or cpu_standby), success status, original_gpu_id, new_gpu_id, new_ssh_host, new_ssh_port, and total_ms. Uses asyncio.create_task for fire-and-forget webhook delivery since execute_failover is already async.",
      "category": "webhook_integration",
      "discovered_at": "2025-12-31T22:31:52.980198+00:00"
    },
    "web/src/store/slices/webhooksSlice.js": {
      "description": "Redux slice for webhook state management. Exports async thunks: fetchWebhooks, fetchWebhook, createWebhook, updateWebhook, deleteWebhook, testWebhook, fetchWebhookLogs, fetchEventTypes. Exports selectors: selectWebhooks, selectSelectedWebhook, selectWebhookLogs(webhookId), selectEventTypes, selectWebhooksLoading, selectLogsLoading, selectTestingWebhookId, selectWebhooksError, selectEnabledWebhooks. State includes webhooks array, selectedWebhook, logs map (webhookId -> logs[]), eventTypes, loading states, and error.",
      "category": "frontend",
      "discovered_at": "2025-12-31T22:37:53.036946+00:00"
    }
  },
  "last_updated": "2025-12-31T22:37:53.036963+00:00"
}